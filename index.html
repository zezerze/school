<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Textbook</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<style>
:root{--bg-dark:#1f1f2e;--bg-light:#fafafa;--text-dark:#eaeaea;--text-light:#1f1f2e;--accent-dark:#b39ddb;--accent-light:#7986cb;--card-dark:#2b2b3f;--card-light:#e8eaf6;--card-hover-dark:#3a3a5a;--card-hover-light:#d5d5e5;}
body{font-family:'Poppins',sans-serif;margin:0;padding:0;transition:.3s}h1{text-align:center;margin:20px 0}#tabDescription{text-align:center;margin-bottom:20px;font-size:14px;font-weight:500;opacity:0;transform:translateY(20px);transition:.3s}.tabs{display:flex;justify-content:center;gap:10px;flex-wrap:wrap;margin-bottom:20px}.tab{padding:10px 20px;border-radius:10px;cursor:pointer;font-weight:600;transition:.3s}.tab:hover{transform:scale(1.05)}.tab.active{box-shadow:0 0 10px var(--accent-dark)}.content{max-width:600px;margin:0 auto;padding:10px;opacity:0;transform:translateY(20px);transition:.3s;display:none}.content.active{display:block;opacity:1;transform:translateY(0)}.card{background:var(--card-dark);padding:15px;margin:10px 0;border-radius:10px;display:flex;justify-content:space-between;align-items:center;transition:.3s}.card:hover{background:var(--card-hover-dark)}input,button,select{padding:8px;margin:8px 0;border-radius:5px;border:none;font-family:'Poppins'}input,select{width:60%}button{cursor:pointer;font-weight:600;transition:.2s}ul{list-style:none;padding:0}li{margin:3px 0}.theme-selector{position:fixed;bottom:15px;right:15px;z-index:100}#themeBtn{padding:10px 15px;border-radius:10px;border:none;cursor:pointer;font-weight:600;background:var(--accent-dark);color:#fff;transition:.3s}#themeBtn:hover{transform:scale(1.1)}.dropdown-content{display:none;position:absolute;bottom:50px;right:0;background:var(--card-dark);border-radius:10px;overflow:hidden;transition:.3s;max-height:0;opacity:0}.dropdown-content div{padding:10px;cursor:pointer;transition:.2s}.dropdown-content div:hover{background:var(--card-hover-dark)}.dropdown-content.show{display:block;max-height:500px;opacity:1}

/* Dark & light mode */
body.dark-mode{background:var(--bg-dark);color:var(--text-dark)}body.dark-mode h1{color:var(--accent-dark)}body.dark-mode .tab{background:#33334d;color:var(--text-dark)}body.dark-mode .tab.active{background:var(--accent-dark);color:#1f1f2e;box-shadow:0 0 10px var(--accent-dark)}body.dark-mode .card{background:var(--card-dark);color:#fff}body.dark-mode .card:hover{background:var(--card-hover-dark)}body.dark-mode button{background:var(--accent-dark);color:#1f1f2e}body.light-mode{background:var(--bg-light);color:var(--text-light)}body.light-mode h1{color:var(--accent-light)}body.light-mode .tab{background:#d0d0d0;color:var(--text-light)}body.light-mode .tab.active{background:var(--accent-light);color:#fff;box-shadow:0 0 10px var(--accent-light)}body.light-mode .card{background:var(--card-light);color:#000}body.light-mode .card:hover{background:var(--card-hover-light)}body.light-mode button{background:var(--accent-light);color:#fff}

/* spacing fixes */
input + button, select + button {margin-left:8px;}
input, select {margin-bottom:10px;}
</style>
</head>
<body class="dark-mode">

<h1>Textbook</h1>
<div id="tabDescription"></div>

<div class="tabs">
  <div class="tab active" data-tab="homework">Homework</div>
  <div class="tab" data-tab="grades">Grades</div>
  <div class="tab" data-tab="notes">Notes</div>
  <div class="tab" data-tab="critique">Critique</div>
  <div class="tab" data-tab="projects">Group Projects</div>
</div>

<div class="content active" id="homework">
  <input id="hwName" placeholder="Assignment Name">
  <input id="hwDue" placeholder="Due Date">
  <button onclick="addHW()">Add Assignment</button>
  <ul id="hwList"></ul>
</div>

<div class="content" id="grades">
  <input id="gradeSubject" placeholder="Subject">
  <input type="number" id="gradeInput" placeholder="Grade">
  <button onclick="addGrade()">Add Grade</button>
  <ul id="gradeList"></ul>
  <p id="avgGrade"></p>
</div>

<div class="content" id="notes">
  <input id="noteInput" placeholder="Add note">
  <button onclick="addNote()">Add</button>
  <input id="noteSearch" placeholder="Search notes" oninput="searchNotes()">
  <ul id="noteList"></ul>
</div>

<div class="content" id="critique">
  <input id="critInput" placeholder="Enter text for critique">
  <button onclick="addCrit()">Get Critique</button>
  <ul id="critList"></ul>
</div>

<div class="content" id="projects">
  <input id="memberInput" placeholder="Add member">
  <button onclick="addMember()">Add</button>
  <ul id="memberList"></ul>
  <input id="taskInput" placeholder="Add task">
  <select id="memberAssign"></select>
  <button onclick="addTask()">Add Task</button>
  <ul id="taskList"></ul>
</div>

<div class="theme-selector">
  <button id="themeBtn">ðŸŽ¨</button>
  <div id="themeDropdown" class="dropdown-content">
    <div onclick="setTheme('subtle')">Subtle</div>
    <div onclick="setTheme('ocean')">Ocean</div>
    <div onclick="setTheme('sunset')">Sunset</div>
    <div onclick="setTheme('forest')">Forest</div>
    <div onclick="setTheme('tech')">Tech Blue</div>
    <div onclick="setTheme('rose')">Rose</div>
    <div onclick="setTheme('mint')">Mint</div>
  </div>
</div>

<script>
// Tabs
const tabs=document.querySelectorAll('.tab'),contents=document.querySelectorAll('.content');
const descs={homework:"Track assignments",grades:"Add grades",notes:"Write notes",critique:"Mini AI critique",projects:"Manage members"};
const desc=document.getElementById('tabDescription');
tabs.forEach(t=>t.addEventListener('click',()=>{
  tabs.forEach(x=>x.classList.remove('active'));
  contents.forEach(c=>{c.classList.remove('active');c.style.opacity=0;c.style.transform="translateY(20px)"});
  t.classList.add('active');
  const c=document.getElementById(t.dataset.tab);
  c.classList.add('active');
  setTimeout(()=>{c.style.opacity=1;c.style.transform="translateY(0)"},50);
  desc.style.opacity=0;
  setTimeout(()=>{desc.textContent=descs[t.dataset.tab];desc.style.opacity=1;desc.style.transform="translateY(0)"},200);
}));
desc.textContent=descs.homework;desc.style.opacity=1;desc.style.transform="translateY(0)";

// Helpers
function save(k,v){localStorage.setItem(k,JSON.stringify(v))} 
function load(k){return JSON.parse(localStorage.getItem(k)||'[]')}

// Homework
let hw=load('hw');
function renderHW(){const ul=document.getElementById('hwList');ul.innerHTML='';hw.forEach((v,i)=>{const c=document.createElement('div');c.className='card';c.textContent=v;const b=document.createElement('button');b.textContent='Remove';b.onclick=()=>{hw.splice(i,1);save('hw',hw);renderHW()};c.appendChild(b);ul.appendChild(c)})}
function addHW(){const n=document.getElementById('hwName').value,d=document.getElementById('hwDue').value;if(n&&d){hw.push(`${n} - ${d}`);save('hw',hw);renderHW();document.getElementById('hwName').value=document.getElementById('hwDue').value=''}}
renderHW()

// Grades
let grades=load('grades');
function renderGrades(){const ul=document.getElementById('gradeList');ul.innerHTML='';grades.forEach((g,i)=>{const c=document.createElement('div');c.className='card';c.textContent=`${g.sub}:${g.val}`;const b=document.createElement('button');b.textContent='Remove';b.onclick=()=>{grades.splice(i,1);save('grades',grades);renderGrades()};c.appendChild(b);ul.appendChild(c)});const avg=grades.reduce((a,b)=>a.val+a,0)/grades.length||0;document.getElementById('avgGrade').textContent=`Avg: ${avg.toFixed(2)}`}
function addGrade(){const s=document.getElementById('gradeSubject').value,v=parseFloat(document.getElementById('gradeInput').value);if(s&&!isNaN(v)){grades.push({sub:s,val:v});save('grades',grades);renderGrades();document.getElementById('gradeSubject').value=document.getElementById('gradeInput').value=''}}
renderGrades()

// Notes
let notes=load('notes');
function renderNotes(l){const ul=document.getElementById('noteList');ul.innerHTML='';l.forEach((n,i)=>{const c=document.createElement('div');c.className='card';c.textContent=n;const b=document.createElement('button');b.textContent='Remove';b.onclick=()=>{notes.splice(i,1);save('notes',notes);renderNotes(notes)};c.appendChild(b);ul.appendChild(c)})}
function addNote(){const v=document.getElementById('noteInput').value.trim();if(v){notes.push(v);save('notes',notes);document.getElementById('noteInput').value='';renderNotes(notes)}}
function searchNotes(){const q=document.getElementById('noteSearch').value.toLowerCase();renderNotes(notes.filter(n=>n.toLowerCase().includes(q)))}
renderNotes(notes)

// Critique
let cr=load('cr');
function mini(t){let o=t.toLowerCase().match(/love|yay|cool/)?'- positive vibes\n':t.toLowerCase().match(/hate|ugh|bad/)?'- kinda negative\n':'- neutral tone\n';let w=t.split(' ').length;o+=w<10?'- short, say more\n':w>50?'- detailed, split it up\n':'- good length\n';if(t.includes('?'))o+='- asks a question, nice\n';return o}
function renderCrit(){const ul=document.getElementById('critList');ul.innerHTML='';cr.forEach((t,i)=>{const li=document.createElement('li');li.innerHTML=`<div>${t}</div><pre style="color:#aaa;font-size:12px;">${mini(t)}</pre>`;const b=document.createElement('button');b.textContent='Remove';b.onclick=()=>{cr.splice(i,1);save('cr',cr);renderCrit()};li.appendChild(b);ul.appendChild(li)})}
function addCrit(){const v=document.getElementById('critInput').value.trim();if(!v)return;cr.push(v);save('cr',cr);document.getElementById('critInput').value='';renderCrit()}
renderCrit()

// Projects
let members=load('members'),tasks=load('tasks');
const sel=document.getElementById('memberAssign');sel.style.width='60%';
function updateSelect(){sel.innerHTML='';members.forEach(m=>{const o=document.createElement('option');o.value=o.textContent=m;sel.appendChild(o)})}
function renderList(id,l){const ul=document.getElementById(id);ul.innerHTML='';l.forEach((v,i)=>{const c=document.createElement('div');c.className='card';c.textContent=v;const b=document.createElement('button');b.textContent='Remove';b.onclick=()=>{l.splice(i,1);save(id==='memberList'?'members':'tasks',l);renderList(id,l);updateSelect()};c.appendChild(b);ul.appendChild(c)})}
function addMember(){const v=document.getElementById('memberInput').value.trim();if(!v)return;members.push(v);save('members',members);document.getElementById('memberInput').value='';renderList('memberList',members);updateSelect()}
function addTask(){const v=document.getElementById('taskInput').value.trim(),m=sel.value;if(!v||!m)return;tasks.push(`${v} - ${m}`);save('tasks',tasks);document.getElementById('taskInput').value='';renderList('taskList',tasks)}
renderList('memberList',members);renderList('taskList',tasks);updateSelect()

// Themes
const themes={subtle:{accentDark:'#b39ddb',accentLight:'#7986cb',cardDark:'#2b2b3f',cardLight:'#e8eaf6',cardHoverDark:'#3a3a5a',cardHoverLight:'#d5d5e5'},ocean:{accentDark:'#64b5f6',accentLight:'#2196f3',cardDark:'#1e3c5a',cardLight:'#d0e4f5',cardHoverDark:'#2a5272',cardHoverLight:'#a0c4f2'},sunset:{accentDark:'#ff8a65',accentLight:'#ff7043',cardDark:'#5a2e1e',cardLight:'#fbe9e7',cardHoverDark:'#7a4430',cardHoverLight:'#ffd4c9'},forest:{accentDark:'#81c784',accentLight:'#66bb6a',cardDark:'#1f3a1f',cardLight:'#e0f2e9',cardHoverDark:'#2a5530',cardHoverLight:'#c4f0d1'},tech:{accentDark:'#4fc3f7',accentLight:'#29b6f6',cardDark:'#162c3f',cardLight:'#d0f0ff',cardHoverDark:'#27455a',cardHoverLight:'#a6e0ff'},rose:{accentDark:'#e57373',accentLight:'#f06292',cardDark:'#4a1f1f',cardLight:'#fde0e0',cardHoverDark:'#6a3333',cardHoverLight:'#ffcaca'},mint:{accentDark:'#4db6ac',accentLight:'#26a69a',cardDark:'#1f3a37',cardLight:'#d0f0ed',cardHoverDark:'#2a5652',cardHoverLight:'#a6eae2'}};
document.getElementById('themeBtn').onclick=()=>document.getElementById('themeDropdown').classList.toggle('show');
function setTheme(n){const t=themes[n];['--accent-dark','--accent-light','--card-dark','--card-light','--card-hover-dark','--card-hover-light'].forEach((v,i)=>document.documentElement.style.setProperty(v,Object.values(t)[i]));document.getElementById('themeDropdown').classList.remove('show')}
</script>
</body>
</html>
